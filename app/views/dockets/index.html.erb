<div class='breadcrumbs'>
  <ul>
    <% if can? :manage, Subdivision %>
      <li>
        <%= link_to 'Список обеспечивающих кафедр', subdivisions_path %>
      </li>
    <% end %>
    <li>
      <%= link_to @subdivision, subdivision_path(@subdivision) %>
    </li>
    <li>
      <%= link_to @period.title, subdivision_dockets_path(@subdivision, :by_period => @period.id) %>
    </li>
  </ul>
</div>

<h1>Список ведомостей</h1>

<div class='search'>
  <div class='search_in_list_wrapper'>
    <%= simple_form_for :search, :html => { :class => 'search_form' } do |f| %>
      <%= f.input :query, :label => false, :placeholder => 'Найти по названию предмета, номеру группы, преподавателю', :input_html => { :data => { :list => '.list.dockets' } } %>
    <% end %>
  </div>

  <% if summary_dockets_links.any? %>
    <div class='links_to_file'>
      <%= link_to 'Скачать', '#' %>
      <ul class='links'>
        <%= summary_dockets_links.join("\n").html_safe %>
      </ul>
    </div>
  <% end %>
</div>

<ul class='list dockets'>
  <% @dockets.each do |docket| %>
    <li>
      <%= link_to [docket.discipline, "гр. #{docket.group}", docket.lecturer, (docket.kind_text.mb_chars.downcase if docket.kind)].compact.join(', '), [@subdivision, docket] %>
      <div class="errors">
        <span><%= 'не заполнена ведомость' unless docket.filled? %></span>
      </div>
    </li>
  <% end %>
</ul>
